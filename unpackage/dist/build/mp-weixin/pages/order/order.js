(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"5f58":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("a34a")),i=u(n("9e6c")),o=n("6f0d"),a=n("72a0"),s=u(n("595d"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return h(e)||f(e)||l(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function h(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){g(o,r,i,a,s,"next",e)}function s(e){g(o,r,i,a,s,"throw",e)}a(void 0)}))}}var v=function(){n.e("components/rf-load-more/rf-load-more").then(function(){return resolve(n("d525"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/rf-count-down/index").then(function(){return resolve(n("2b34"))}.bind(null,n)).catch(n.oe)},L={components:{rfLoadMore:v,rfCountDown:b},data:function(){return{tabCurrentIndex:null,loadingType:"more",navList:this.$mConstDataConfig.orderNavList,moneySymbol:this.moneySymbol,orderList:[],page:1,loading:!0,isRefreshing:!0,guessYouLikeList:[],singleSkuText:this.singleSkuText}},computed:{second:function(){return function(e){return Math.floor(e-new Date/1e3)}}},filters:{time:function(e){return(0,i.default)(1e3*e).format("YYYY-MM-DD HH:mm:ss")},orderStatusFilter:function(e){var t;return s.default.orderStatus.forEach((function(n){n.key===parseInt(e,10)&&(t=n.value)})),t}},onShow:function(){this.initData()},onLoad:function(e){this.tabCurrentIndex=parseInt(e.state,10)+1},onPullDownRefresh:function(){this.page=1,this.orderList.length=0,this.getOrderList("refresh")},onReachBottom:function(){"nomore"!==this.loadingType&&0!==this.orderList.length&&(this.page++,this.getOrderList())},methods:{timeUp:function(e){this.isRefreshing&&(this.isRefreshing=!1,this.handleOrderClose(e.id))},handleOrderOperation:function(e,t){switch(t){case"detail":this.navTo("/pages/order/detail?id=".concat(e.id));break;case"evaluation":this.navTo("/pages/order/evaluation/evaluation?order_id=".concat(e.id));break;case"close":this.handleOrderClose(e.id);break;case"delete":this.handleOrderDelete(e.id);break;case"shipping":this.navTo("/pages/order/shipping/shipping?id=".concat(e.id));break;case"delivery":this.handleOrderTakeDelivery(e.id);break}},navTo:function(e){this.$mRouter.push({route:e})},handleOrderClose:function(e){var t=this;return m(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("".concat(a.orderClose),{id:e}).then((function(){t.isRefreshing=!0,t.$mHelper.toast("订单取消成功"),setTimeout((function(){t.loading=!0,t.page=1,t.orderList.length=0,t.getOrderList()}),500)}));case 2:case"end":return n.stop()}}),n)})))()},handleOrderDelete:function(e){var t=this;return m(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("".concat(o.orderDelete,"?id=").concat(e),{}).then((function(){t.$mHelper.toast("订单删除成功"),setTimeout((function(){t.page=1,t.orderList.length=0,t.getOrderList()}),500)}));case 2:case"end":return n.stop()}}),n)})))()},handleOrderTakeDelivery:function(e){var t=this;return m(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("".concat(o.orderTakeDelivery),{id:e}).then((function(){t.page=1,t.orderList.length=0,t.getOrderList()}));case 2:case"end":return n.stop()}}),n)})))()},initData:function(){var e=this;return m(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.page=1,e.orderList.length=0,t.next=4,e.getOrderList();case 4:case"end":return t.stop()}}),t)})))()},getOrderList:function(t){var n=this;return m(r.default.mark((function i(){var a,s;return r.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=n.navList[n.tabCurrentIndex],s={},(a.state||0===a.state)&&(s.synthesize_status=a.state),s.page=n.page,i.next=6,n.$http.get("".concat(o.orderList),s).then(function(){var i=m(r.default.mark((function i(o){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("refresh"===t&&e.stopPullDownRefresh(),n.loadingType=10===o.data.length?"more":"nomore",n.orderList=[].concat(c(n.orderList),c(o.data)),0!==n.orderList.length){r.next=6;break}return r.next=6,n.getGuessYouLikeList();case 6:n.loading=!1;case 7:case"end":return r.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(){n.loading=!1,"refresh"===t&&e.stopPullDownRefresh()}));case 6:case"end":return i.stop()}}),i)})))()},getGuessYouLikeList:function(){var e=this;return m(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("".concat(a.guessYouLikeList)).then((function(t){e.guessYouLikeList=t.data}));case 2:case"end":return t.stop()}}),t)})))()},changeTab:function(e){this.page=1,this.orderList.length=0,this.tabCurrentIndex=e.target.current,this.loading=!0,this.getOrderList()},tabClick:function(e){this.page=1,this.orderList.length=0,this.tabCurrentIndex=e,this.loading=!0,this.getOrderList()},getMoreOrderList:function(){"nomore"!==this.loadingType&&0!==this.orderList.length&&(this.page++,this.getOrderList())}}};t.default=L}).call(this,n("543d")["default"])},ac43:function(e,t,n){"use strict";n.r(t);var r=n("b5a6"),i=n("e938");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("db5e");var a,s=n("f0c5"),u=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=u.exports},b5a6:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={rfLoadMore:function(){return n.e("components/rf-load-more/rf-load-more").then(n.bind(null,"d525"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.navList,(function(t,n){var r=e.__get_orig(t),i=e.__map(e.orderList,(function(t,n){var r=e.__get_orig(t),i=parseInt(t.order_status,10),o=0!==i?e._f("orderStatusFilter")(t.order_status):null,a=0===i?e.second(t.close_time):null;return{$orig:r,m0:i,f0:o,m1:a}}));return{$orig:r,l0:i}})));e.$mp.data=Object.assign({},{$root:{l1:n}})},o=[]},b858:function(e,t,n){},db5e:function(e,t,n){"use strict";var r=n("b858"),i=n.n(r);i.a},e938:function(e,t,n){"use strict";n.r(t);var r=n("5f58"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},ec21:function(e,t,n){"use strict";(function(e){n("3029"),n("921b");r(n("66fd"));var t=r(n("ac43"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["ec21","common/runtime","common/vendor"]]]);