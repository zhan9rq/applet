(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/refund/refund"],{"180b":function(e,n,t){"use strict";t.r(n);var r=t("6b6a"),u=t("918f");for(var o in u)"default"!==o&&function(e){t.d(n,e,(function(){return u[e]}))}(o);t("e2bb");var a,i=t("f0c5"),c=Object(i["a"])(u["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);n["default"]=c.exports},"4b5b":function(e,n,t){"use strict";(function(e){t("3029"),t("921b");r(t("66fd"));var n=r(t("180b"));function r(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"6b6a":function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return r}));var r={rfImage:function(){return Promise.all([t.e("common/vendor"),t.e("components/rf-image/rf-image")]).then(t.bind(null,"0e89"))}},u=function(){var e=this,n=e.$createElement,t=(e._self._c,parseInt(e.refundType,10)),r=parseInt(e.refund_type,10);e.$mp.data=Object.assign({},{$root:{m0:t,m1:r}})},o=[]},7906:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("a34a")),u=t("6f0d");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e,n,t,r,u,o,a){try{var i=e[o](a),c=i.value}catch(f){return void t(f)}i.done?n(c):Promise.resolve(c).then(r,u)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,u){var o=e.apply(n,t);function a(e){f(o,r,u,a,i,"next",e)}function i(e){f(o,r,u,a,i,"throw",e)}a(void 0)}))}}var d=function(){t.e("components/rf-list-cell/index").then(function(){return resolve(t("fe12"))}.bind(null,t)).catch(t.oe)},l={data:function(){return{productInfo:{},refundType:1,refund_type:1,refund_reason:"",refund_explain:"",imageList:[],moneySymbol:this.moneySymbol,refundTypeArr:[{value:"1",name:"仅退款"},{value:"2",name:"退货退款"}],singleSkuText:this.singleSkuText,msgContents:["商品信息描述不符","退运费","质量问题","少件含缺少配件","包装/商品损坏/污渍","未按约定时间发货","发票问题","卖家发错货","其他"]}},components:{listCell:d},computed:{wordLimit:function(){return 140-this.refund_reason.length}},onLoad:function(e){this.initData(e)},methods:{initData:function(n){this.productInfo=JSON.parse(n.data),this.refundType=n.refundType;var t="仅退款";t=1===parseInt(this.refundType,10)?"仅退款":"仅退款/退货退款",e.setNavigationBarTitle({title:t})},chooseRefundReasonType:function(){var n=this;e.showActionSheet({itemList:this.msgContents,success:function(e){n.refund_reason=n.msgContents[e.tapIndex]}})},uploadImage:function(){var n=this;e.chooseImage({count:9,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){n.imageList.length+e.tempFiles.length>9?n.$mHelper.toast("不要贪心哦，最多只可上传9张照片"):n.handleUploadFile(e.tempFilePaths)}})},handleUploadFile:function(e){var n=this;e.forEach((function(e){n.$http.upload(u.uploadImage,{filePath:e,name:"file"}).then((function(e){n.imageList.push(e.data.url)}))}))},close:function(e){this.imageList.splice(e,1)},handleRefundTypeChange:function(e){this.refund_type=e.detail.value},navTo:function(e){this.$mRouter.push({route:e})},handleOrderRefundApply:function(e){var n=this;return s(r.default.mark((function t(){var u;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u=e.detail.value,1===parseInt(n.refundType,10)&&(u.refund_type=n.refundType),u["refund_evidence"]=JSON.stringify(n.imageList),u["refund_explain"]=n.refund_explain,u["refund_reason"]=n.refund_reason,"3"!==n.refundType.toString()){t.next=10;break}return t.next=8,n.handleOrderCustomerRefundApply(n.productInfo.id,u);case 8:t.next=12;break;case 10:return t.next=12,n.handleOrderRefundApplyOperation(n.productInfo.id,u);case 12:case"end":return t.stop()}}),t)})))()},handleOrderRefundApplyOperation:function(e,n){var t=this;return s(r.default.mark((function o(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("".concat(u.orderRefundApply),i({id:e},n)).then((function(){t.$mHelper.toast("申请成功"),t.$mRouter.back()}));case 2:case"end":return r.stop()}}),o)})))()},handleOrderCustomerRefundApply:function(e,n){var t=this;return s(r.default.mark((function o(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("".concat(u.orderCustomerRefundApply),i({id:e},n)).then((function(){t.$mHelper.toast("申请成功"),t.$mRouter.back()}));case 2:case"end":return r.stop()}}),o)})))()}}};n.default=l}).call(this,t("543d")["default"])},"918f":function(e,n,t){"use strict";t.r(n);var r=t("7906"),u=t.n(r);for(var o in r)"default"!==o&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=u.a},e2bb:function(e,n,t){"use strict";var r=t("f70b"),u=t.n(r);u.a},f70b:function(e,n,t){}},[["4b5b","common/runtime","common/vendor"]]]);