(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/address/manage"],{"29e2":function(e,t,a){"use strict";a.r(t);var n=a("a635"),i=a("cd67");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("a11c");var d,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],d);t["default"]=c.exports},4893:function(e,t,a){"use strict";(function(e){a("3029"),a("921b");n(a("66fd"));var t=n(a("29e2"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},a11c:function(e,t,a){"use strict";var n=a("a9ba"),i=a.n(n);i.a},a635:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=[]},a9ba:function(e,t,a){},cd67:function(e,t,a){"use strict";a.r(t);var n=a("e053"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},e053:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("a34a")),i=a("6f0d");function r(e){return e&&e.__esModule?e:{default:e}}function d(e,t,a,n,i,r,d){try{var s=e[r](d),c=s.value}catch(u){return void a(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function s(e){d(r,n,i,s,c,"next",e)}function c(e){d(r,n,i,s,c,"throw",e)}s(void 0)}))}}var c=function(){Promise.all([a.e("common/vendor"),a.e("components/rf-pick-regions/index")]).then(function(){return resolve(a("fd73"))}.bind(null,a)).catch(a.oe)},u={components:{rfPickRegions:c},data:function(){return{addressData:{realname:"",mobile:"",address_details:"",address_name:"请选择地址",address:"",is_default:!1,province_id:"",city_id:"",area_id:""},btnLoading:!1,multiArray:[[],[],[]],multiIndex:[0,0,0],loading:!0}},onLoad:function(e){this.initData(e)},methods:{handleGetRegions:function(e){this.addressData.province_id=e.province_id,this.addressData.city_id=e.city_id,this.addressData.area_id=e.area_id},initData:function(t){var a=this;return s(n.default.mark((function i(){var r;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r="新增收货地址","edit"!==t.type){n.next=7;break}return r="编辑收货地址",n.next=5,a.getAddressDetail(t.id);case 5:n.next=8;break;case 7:setTimeout((function(){a.loading=!1}),1e3);case 8:a.manageType=t.type,e.setNavigationBarTitle({title:r});case 10:case"end":return n.stop()}}),i)})))()},getAddressDetail:function(e){var t=this;return s(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("".concat(i.addressDetail),{id:e}).then(function(){var e=s(n.default.mark((function e(a){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:t.addressData=e.sent,t.loading=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.loading=!1}));case 2:case"end":return a.stop()}}),a)})))()},handleRealNameChange:function(e){this.addressData.realname=e.detail.value},bindAddressDetailsChange:function(e){this.addressData.address_details=e.detail.value},handleMobileChange:function(e){this.addressData.mobile=e.detail.value},switchChange:function(e){this.addressData.is_default=e.detail.value},confirm:function(){var e=this.addressData;e.realname?/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(e.mobile)?(this.btnLoading=!0,"edit"===this.manageType?this.handleAddressUpdate(e):this.handleAddressCreate(e)):this.$mHelper.toast("请输入正确的手机号码"):this.$mHelper.toast("请填写收货人姓名")},handleAddressUpdate:function(e){var t=this;return s(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("".concat(i.addressUpdate,"?id=").concat(e.id),{realname:e.realname,mobile:e.mobile,address_details:e.address_details,is_default:e.is_default?1:0,province_id:e.province_id,city_id:e.city_id,area_id:e.area_id}).then((function(){t.btnLoading=!1,t.$mHelper.toast("收货地址修改成功！"),t.$mRouter.back()})).catch((function(){t.btnLoading=!1}));case 2:case"end":return a.stop()}}),a)})))()},handleAddressCreate:function(e){var t=this;return s(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.post("".concat(i.addressCreate),{realname:e.realname,mobile:e.mobile,address_details:e.address_details,is_default:e.is_default?1:0,province_id:e.province_id,city_id:e.city_id,area_id:e.area_id}).then((function(){t.btnLoading=!1,t.$mHelper.toast("收货地址修改成功！"),t.$mRouter.back()})).catch((function(){t.btnLoading=!1}));case 2:case"end":return a.stop()}}),a)})))()}}};t.default=u}).call(this,a("543d")["default"])}},[["4893","common/runtime","common/vendor"]]]);