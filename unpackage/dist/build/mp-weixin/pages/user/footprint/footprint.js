(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/footprint/footprint"],{1469:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={rfCalendar:function(){return Promise.all([n.e("common/vendor"),n.e("components/rf-calendar/rf-calendar")]).then(n.bind(null,"83dc"))},rfLoadMore:function(){return n.e("components/rf-load-more/rf-load-more").then(n.bind(null,"d525"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.footPrintList,(function(e,n){var r=t.__get_orig(e),o=e.marketing_type?t._f("marketingTypeTag")(e.marketing_type):null,a=parseInt(e.product&&e.product.product_status),i=t._f("time")(e.created_at);return{$orig:r,f0:o,m0:a,f1:i}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},"6bf5":function(t,e,n){},"7db0":function(t,e,n){"use strict";n.r(e);var r=n("c45e"),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=o.a},"9ab0":function(t,e,n){"use strict";n.r(e);var r=n("1469"),o=n("7db0");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("ca1f");var i,c=n("f0c5"),u=Object(c["a"])(o["default"],r["b"],r["c"],!1,null,"7835ac40",null,!1,r["a"],i);e["default"]=u.exports},c45e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=c(n("a34a")),o=n("6f0d"),a=c(n("9e6c")),i=c(n("c159"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t){return d(t)||l(t)||f(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function l(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return p(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(s){return void n(s)}c.done?e(u):Promise.resolve(u).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){b(a,r,o,i,c,"next",t)}function c(t){b(a,r,o,i,c,"throw",t)}i(void 0)}))}}var y=function(){n.e("components/rf-load-more/rf-load-more").then(function(){return resolve(n("d525"))}.bind(null,n)).catch(n.oe)},w=function(){Promise.all([n.e("common/vendor"),n.e("components/rf-calendar/rf-calendar")]).then(function(){return resolve(n("83dc"))}.bind(null,n)).catch(n.oe)},P={components:{rfLoadMore:y,rfCalendar:w},data:function(){return{footPrintList:[],page:1,loadingType:"more",token:null,startTime:(0,a.default)().startOf("day").format("X"),endTime:(0,a.default)().endOf("day").format("X"),options:[{text:"删除",style:{backgroundColor:"#fa436a"}}],loading:!0,moneySymbol:this.moneySymbol,theIndex:null,oldIndex:null}},filters:{time:function(t){return(0,a.default)(1e3*t).format("YYYY-MM-DD HH:mm:ss")},marketingTypeTag:function(t){var e;switch(t){case"discount":e=i.default.discountTag;break;case"bargain":e=i.default.bargainTag;break;case"group_buy":e=i.default.groupTag;break;case"wholesale":e=i.default.wholesaleTag;break}return e}},onReachBottom:function(){"nomore"!==this.loadingType&&(this.page++,this.getFootPrintList())},onLoad:function(){this.initData()},methods:{handleDateChange:function(t){var e=this;return v(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.page=1,e.footPrintList=[],0===parseInt(t.type)){n.next=13;break}return n.next=5,(0,a.default)("".concat(t.year,"-").concat(t.month,"-").concat(t.date," 00:00:00"),"YYYY-MM-DD HH:mm:ss").valueOf();case 5:return n.t0=n.sent,e.startTime=n.t0/1e3,n.next=9,(0,a.default)("".concat(t.year,"-").concat(t.month,"-").concat(t.date+1," 00:00:00"),"YYYY-MM-DD HH:mm:ss").valueOf();case 9:n.t1=n.sent,e.endTime=n.t1/1e3,n.next=15;break;case 13:e.startTime=void 0,e.startTime=void 0;case 15:e.loading=!0,e.getFootPrintList();case 17:case"end":return n.stop()}}),n)})))()},handleDeleteFootPrint:function(t){var e=this;return v(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.delete("".concat(o.footPrintDel,"?id=").concat(t),{page:e.page}).then((function(){e.$mHelper.toast("删除足迹成功"),e.page=1,e.footPrintList.length=0,e.getFootPrintList(),e.oldIndex=null,e.theIndex=null}));case 2:case"end":return n.stop()}}),n)})))()},initData:function(){this.getFootPrintList()},getFootPrintList:function(){var t=this;return v(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n.page=t.page,t.startTime&&t.endTime&&(n.start_time=t.startTime,n.end_time=t.endTime),e.next=5,t.$http.get("".concat(o.footPrintList),m({},n)).then((function(e){t.loading=!1,t.loadingType=10===e.data.length?"more":"nomore",t.footPrintList=[].concat(u(t.footPrintList),u(e.data))})).catch((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},touchStart:function(t,e){e.touches.length>1?this.isStop=!0:(this.oldIndex=this.theIndex,this.theIndex=null,this.initXY=[e.touches[0].pageX,e.touches[0].pageY])},touchMove:function(t,e){var n=this;if(e.touches.length>1)this.isStop=!0;else{var r=e.touches[0].pageX-this.initXY[0],o=e.touches[0].pageY-this.initXY[1];this.isStop||Math.abs(r)<5||(Math.abs(o)>Math.abs(r)?this.isStop=!0:r<0?(this.theIndex=t,this.isStop=!0):r>0&&null!=this.theIndex&&this.oldIndex===this.theIndex&&(this.oldIndex=t,this.theIndex=null,this.isStop=!0,setTimeout((function(){n.oldIndex=null}),150)))}},touchEnd:function(t,e){this.isStop=!1},navTo:function(t,e){var n="/pages/product/product?id=".concat(e);switch(t){case"discount":n="/pages/marketing/discount/product?id=".concat(e);break;case"bargain":n="/pages/marketing/bargain/product?id=".concat(e);break;case"group_buy":n="/pages/marketing/group/product?id=".concat(e);break;case"wholesale":n="/pages/marketing/wholesale/product?id=".concat(e);break}this.$mRouter.push({route:n})}}};e.default=P},ca1f:function(t,e,n){"use strict";var r=n("6bf5"),o=n.n(r);o.a},dfb5:function(t,e,n){"use strict";(function(t){n("3029"),n("921b");r(n("66fd"));var e=r(n("9ab0"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["dfb5","common/runtime","common/vendor"]]]);